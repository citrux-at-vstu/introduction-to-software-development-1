# Лабораторная работа № 1
*«Некоторые полезные практики и инструменты современной разработки программ»* 
 
## 1. Цель работы
Целью данной работы является  первоначальное знакомство с рядом полезных практик разработки приложений: приемами рефакторинга, концепцией расслоения приложений с использованием объектного подхода, принципами объектного проектирования, некоторыми паттернами проектирования.

## 2. Краткая характеристика работы 
 
В некотором смысле данную работу можно рассматривать как быстрое неформальное введение в методологию построения современных адаптируемых многослойных систем с использованием  гибкого объектного подхода. Рассмотренные в работе практики рассматриваются и развиваются более подробно  в последующих работах : разработка с использованием UML и MDD в UP, разработка в контексте TDD и XP, изучение паттернов проектирования классов, пользовательского интерфейса и взаимодействия с БД, декомпозиция и упаковка проектов.  В качестве базового примера, на котором демонстрируются упомянутые практики, рассматривается небольшое приложение, взаимодействующее с БД для обработки списка работников некоей организации, с определением их пенсионных возрастов и некоторой дополнительной информации, а также созданием простого статистического отчета. Исходный вариант приложения, а также промежуточные версии его переработки предоставляются преподавателем. Описание этапов преобразования проекта приводится в прилагаемой презентации. В ходе работы используется Visual Studio 2017 / 2019. Учебный проект разработан на языке C# с использованием библиотек ADO.NET и WinForms.

## 3.  Порядок выполнения работы 
 
### 3.1 Изучение учебного примера   
 
Необходимо рассмотреть и выполнить отдельные этапы преобразования проекта, описанные в презентации. Перед выполнением следующего пункта переходить к очередной версии кода в системе контроля версий.

1. Загрузить первую версию проекта в Visual Studio, ознакомиться с исходным кодом, скомпилировать, запустить программу, протестировать ее работу с помощью интерфейса пользователя.
2. Выполнить 1-2 переименования методов, выделить 2-3 метода (без параметров и возвращаемого значения, возвращающий значение, метод с параметрами). Выделить класс для работы с БД.
3. Выделить интерфейс для работы с БД. Запустить программу с ключом «test». Убедиться в работоспособности программы в отсутствии файла БД. Доработать программу для выполнения редактирования (!)
4. Выделить 3 класса предметной области.
5. Выделить фасад предметной области. Можно выполнить не все пункты и перейти к рассмотрению заключительной версии. 
 
      
### 3.2 Индивидуальное задание
Модифицировать рассмотренный в работе пример (задания 1-7), либо написать программу с несложным расчетом, имеющую пользовательский интерфейс и обращающуюся к БД (в два этапа :  1 - без классов и 2 - с 3 слоями, либо сразу с 3 слоями.) – задания 8-15. В заданиях 8-15 можно реализовать для начала самые простые задачи.

Варианты заданий : 
 
1. Создать альтернативный вариант  источника данных для рассмотренного примера: текстовый файл (без использования ADO.NET).
2. Создать альтернативный вариант  источника данных для рассмотренного примера: MySQL, SQLite, MS SQL Server Express, LocalDb (по указанию преподавателя).
3. Реализовать выделение цветом разных категорий работников: работающий пенсионер, выходящий на пенсию в этом году, остальные.
4. Добавить категории работников для статистики: до 25 лет, до 40 лет отдельно – мужчины и женщины.
5. Доработать консольный вариант приложения (возможности редактирования данных, настройка параметров статистики – даты - и т.д.)
6. Применить принцип DIP для фасада предметной области и интерфейса пользователя.
7. Разделить ответственности класса EmployeeDomain по работе с данными и как фасада для объектов предметной области (выделить класс, инкапсулирующий sql – запросы).
8. Программа для упрощенного расчета НДФЛ по списку доходов и уплаченных налогов с учетом предоставляемой льготы (льгота – без шкалы):
    ```
    Налог = ОблСуммНГ * Ставка НДФЛ – УдержНДФЛ_НГ
    ОблСуммНГ = ДоходНГ – ЛьготыНГ (или 0, если получена отрицательная сумма)
    УдержНДФЛ_НГ – сумма удержанного налога с начала года.
    ДоходНГ – сумма доходов с начала года.
    ЛьготыНГ = 400 * месяц_дохода 
    ```
    Список доходов и налогов хранится в БД (можно сделать для 1 человека). 
9. Программа для расчета средней заработной платы за год по списку начислений, который хранится в БД. Программа включает отпуска (один месяц без начислений), но не включает месяцы, когда человек не работал (если отсутствуют выплаты более чем в одном месяце подряд).  
10. Программа для упрощенного расчета графика выплат по потребительскому кредиту. Вводится сумма кредита, срок в месяцах, процентная ставка за месяц (единая для каждого месяца) читается из БД.  
Для расчета принимается формула: Сумма выплаты = сумма кредита / срок + проценты по остатку за месяц  
11. Программа для расчета накопительной скидки по списку покупок одного человека (список  хранится в БД, в списке – суммы конкретных покупок). Скидка зависит от общей накопленной суммы (с учетом текущей покупки) и рассчитывается по шкале. Вводится текущая сумма, программа суммирует ее со всеми имеющимися в БД и соотносит со шкалой. 
12. Программа для определения среднего балла студентов по оценкам в семестре, среднего балла за указанные семестры, среднего балла с учетом результата защит и госэкзамена. 
13.  Программа для расчета конфигурации ПК (в БД хранятся комплектующие)   
14. Программа для выписки счетов для ресторана / кафе ПК (в БД хранится меню ) 
15. Штатное расписание кафедры (ППС - должности, звания, учебно-вспомогательный персонал) со статистикой.
